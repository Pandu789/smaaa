<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>SMA MASA DEPAN - Galeri Visual</title>
    <meta name="description" content="Dokumentasi visual kegiatan akademik, ekstrakurikuler, dan fasilitas SMA Masa Depan Malang. Lihat galeri foto kegiatan siswa dan sarana sekolah.">
    <meta name="keywords" content="Galeri SMA Masa Depan, Foto Sekolah Malang, Kegiatan Siswa, Fasilitas Sekolah, Dokumentasi SMA">
    <meta name="author" content="SMA Masa Depan">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://smamasadepan.sch.id/galeri.html">

    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#e0e5ec">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ImageGallery",
      "name": "Galeri SMA Masa Depan",
      "description": "Koleksi foto kegiatan dan fasilitas SMA Masa Depan.",
      "url": "https://smamasadepan.sch.id/galeri.html",
      "author": {
        "@type": "EducationalOrganization",
        "name": "SMA Masa Depan"
      },
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Beranda",
          "item": "https://smamasadepan.sch.id/"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "Galeri",
          "item": "https://smamasadepan.sch.id/galeri.html"
        }]
      }
    }
    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        chassis: '#e0e5ec',
                        panel: '#f0f2f5',
                        recessed: '#d1d9e6',
                        ink: { DEFAULT: '#2d3436', muted: '#4a5568' },
                        safety: { orange: '#ff4757', green: '#00ff41', yellow: '#fbbf24' }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    boxShadow: {
                        'card': '8px 8px 16px #babecc, -8px -8px 16px #ffffff',
                        'floating': '12px 12px 24px #babecc, -12px -12px 24px #ffffff, inset 1px 1px 0 rgba(255,255,255,0.5)',
                        'pressed': 'inset 6px 6px 12px #babecc, inset -6px -6px 12px #ffffff',
                        'recessed': 'inset 4px 4px 8px #babecc, inset -4px -4px 8px #ffffff',
                        'monitor': '0 0 50px rgba(0,0,0,0.5)',
                    },
                    backgroundImage: {
                        'scanlines': 'linear-gradient(rgba(18,16,16,0) 50%, rgba(0,0,0,0.25) 50%)',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #e0e5ec; color: #2d3436; }
        .noise-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50; opacity: 0.4;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            mix-blend-mode: overlay;
        }
        .text-emboss { text-shadow: 0 1px 0 #ffffff; }
        
        /* Animation Classes */
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #e0e5ec; }
        ::-webkit-scrollbar-thumb { background: #babecc; border-radius: 4px; }
    </style>
</head>
<body class="antialiased overflow-x-hidden selection:bg-safety-orange selection:text-white">

    <div class="noise-overlay"></div>

  <nav class="fixed top-0 w-full z-50 bg-[#e0e5ec]/90 backdrop-blur-md border-b border-white/20 shadow-[0_4px_6px_-1px_rgba(0,0,0,0.1),0_2px_4px_-1px_rgba(0,0,0,0.06)] transition-all duration-300" id="mainNavbar">
    
    <div class="hidden lg:flex justify-between items-center px-6 py-1 bg-[#2d3436] text-[10px] font-mono text-gray-400 border-b border-white/5">
        <div class="flex gap-4">
            <span><i data-lucide="phone" class="w-3 h-3 inline mr-1"></i> +62 341 123456</span>
            <span><i data-lucide="mail" class="w-3 h-3 inline mr-1"></i> info@smateknologi.sch.id</span>
        </div>
        <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-[#00ff41] animate-pulse"></span>
            SYSTEM STATUS: ONLINE
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
            
            <a href="index.html" class="flex items-center gap-3 group">
                <div class="w-10 h-10 rounded-lg bg-[#e0e5ec] shadow-[4px_4px_8px_#babecc,-4px_-4px_8px_#ffffff] flex items-center justify-center border border-white/50 group-hover:scale-105 transition-transform active:shadow-[inset_4px_4px_8px_#babecc,inset_-4px_-4px_8px_#ffffff]">
                    <i data-lucide="cpu" class="text-[#2d3436] w-6 h-6 group-hover:text-[#ff4757] transition-colors"></i>
                </div>
                <div class="flex flex-col">
                    <span class="font-sans font-black text-xl text-[#2d3436] leading-none tracking-tight" style="text-shadow: 0 1px 0 #fff;">SMA MASA DEPAN</span>
                    <span class="font-mono text-[9px] tracking-[0.2em] text-[#ff4757] uppercase font-bold mt-1">INDUSTRIAL SCHOOL</span>
                </div>
            </a>

            <div class="hidden lg:flex items-center space-x-1">
                <a href="index.html" class="nav-link group relative px-4 py-2 rounded-md font-mono text-xs font-bold text-[#4a5568] hover:text-[#2d3436] transition-all">
                    BERANDA
                    <span class="absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-[#ff4757] rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity shadow-[0_0_5px_#ff4757]"></span>
                </a>

                <a href="akademik.html" class="nav-link group relative px-4 py-2 rounded-md font-mono text-xs font-bold text-[#4a5568] hover:text-[#2d3436] transition-all">
                    AKADEMIK
                    <span class="absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-[#ff4757] rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity shadow-[0_0_5px_#ff4757]"></span>
                </a>

                <a href="kesiswaan.html" class="nav-link group relative px-4 py-2 rounded-md font-mono text-xs font-bold text-[#4a5568] hover:text-[#2d3436] transition-all">
                    KESISWAAN
                    <span class="absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-[#ff4757] rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity shadow-[0_0_5px_#ff4757]"></span>
                </a>

                <a href="fasilitas.html" class="nav-link group relative px-4 py-2 rounded-md font-mono text-xs font-bold text-[#4a5568] hover:text-[#2d3436] transition-all">
                    FASILITAS
                    <span class="absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-[#ff4757] rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity shadow-[0_0_5px_#ff4757]"></span>
                </a>

                <a href="galeri.html" class="nav-link group relative px-4 py-2 rounded-md font-mono text-xs font-bold text-[#4a5568] hover:text-[#2d3436] transition-all">
                    GALERI
                    <span class="absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-[#ff4757] rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity shadow-[0_0_5px_#ff4757]"></span>
                </a>

                <a href="blog.html" class="nav-link group relative px-4 py-2 rounded-md font-mono text-xs font-bold text-[#4a5568] hover:text-[#2d3436] transition-all">
                    BERITA
                    <span class="absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-[#ff4757] rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity shadow-[0_0_5px_#ff4757]"></span>
                </a>
                
                <a href="kontak.html" class="nav-link group relative px-4 py-2 rounded-md font-mono text-xs font-bold text-[#4a5568] hover:text-[#2d3436] transition-all">
                    KONTAK
                    <span class="absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-[#ff4757] rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity shadow-[0_0_5px_#ff4757]"></span>
                </a>
            </div>

            <div class="hidden lg:block ml-4">
                <a href="ppdb.html" class="group relative inline-flex items-center gap-2 px-6 py-2.5 bg-[#ff4757] text-white font-mono text-xs font-bold uppercase tracking-widest rounded transition-all shadow-[4px_4px_8px_rgba(166,50,60,0.4),-4px_-4px_8px_rgba(255,100,110,0.4)] hover:shadow-[6px_6px_12px_rgba(166,50,60,0.5),-6px_-6px_12px_rgba(255,100,110,0.5)] active:translate-y-[2px] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2)]">
                    <i data-lucide="log-in" class="w-4 h-4"></i>
                    PPDB ONLINE
                </a>
            </div>

            <div class="flex lg:hidden">
                <button onclick="toggleMobileMenu()" class="w-12 h-12 rounded-lg bg-[#e0e5ec] shadow-[4px_4px_8px_#babecc,-4px_-4px_8px_#ffffff] flex items-center justify-center text-[#2d3436] active:shadow-[inset_4px_4px_8px_#babecc,inset_-4px_-4px_8px_#ffffff] transition-all">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="mobileMenu" class="hidden lg:hidden bg-[#e0e5ec] border-t border-white/20 shadow-inner overflow-hidden transition-all duration-300">
        <div class="px-4 pt-4 pb-6 space-y-2">
            
            <a href="index.html" class="mobile-link block px-4 py-3 rounded-lg text-sm font-bold text-[#4a5568] hover:bg-[#d1d9e6] hover:text-[#ff4757] hover:shadow-[inset_2px_2px_5px_#babecc,inset_-2px_-2px_5px_#ffffff] transition-all flex justify-between items-center">
                BERANDA <i data-lucide="home" class="w-4 h-4 opacity-50"></i>
            </a>
            
            <a href="akademik.html" class="mobile-link block px-4 py-3 rounded-lg text-sm font-bold text-[#4a5568] hover:bg-[#d1d9e6] hover:text-[#ff4757] hover:shadow-[inset_2px_2px_5px_#babecc,inset_-2px_-2px_5px_#ffffff] transition-all flex justify-between items-center">
                AKADEMIK <i data-lucide="book-open" class="w-4 h-4 opacity-50"></i>
            </a>
            
            <a href="kesiswaan.html" class="mobile-link block px-4 py-3 rounded-lg text-sm font-bold text-[#4a5568] hover:bg-[#d1d9e6] hover:text-[#ff4757] hover:shadow-[inset_2px_2px_5px_#babecc,inset_-2px_-2px_5px_#ffffff] transition-all flex justify-between items-center">
                KESISWAAN <i data-lucide="users" class="w-4 h-4 opacity-50"></i>
            </a>
            
            <a href="fasilitas.html" class="mobile-link block px-4 py-3 rounded-lg text-sm font-bold text-[#4a5568] hover:bg-[#d1d9e6] hover:text-[#ff4757] hover:shadow-[inset_2px_2px_5px_#babecc,inset_-2px_-2px_5px_#ffffff] transition-all flex justify-between items-center">
                FASILITAS <i data-lucide="monitor" class="w-4 h-4 opacity-50"></i>
            </a>
            
            <a href="galeri.html" class="mobile-link block px-4 py-3 rounded-lg text-sm font-bold text-[#4a5568] hover:bg-[#d1d9e6] hover:text-[#ff4757] hover:shadow-[inset_2px_2px_5px_#babecc,inset_-2px_-2px_5px_#ffffff] transition-all flex justify-between items-center">
                GALERI <i data-lucide="image" class="w-4 h-4 opacity-50"></i>
            </a>

            <a href="blog.html" class="mobile-link block px-4 py-3 rounded-lg text-sm font-bold text-[#4a5568] hover:bg-[#d1d9e6] hover:text-[#ff4757] hover:shadow-[inset_2px_2px_5px_#babecc,inset_-2px_-2px_5px_#ffffff] transition-all flex justify-between items-center">
                BERITA <i data-lucide="newspaper" class="w-4 h-4 opacity-50"></i>
            </a>
            
            <a href="kontak.html" class="mobile-link block px-4 py-3 rounded-lg text-sm font-bold text-[#4a5568] hover:bg-[#d1d9e6] hover:text-[#ff4757] hover:shadow-[inset_2px_2px_5px_#babecc,inset_-2px_-2px_5px_#ffffff] transition-all flex justify-between items-center">
                KONTAK <i data-lucide="phone" class="w-4 h-4 opacity-50"></i>
            </a>

            <div class="pt-4 border-t border-gray-300">
                <a href="ppdb.html" class="block w-full py-4 bg-[#ff4757] text-white text-center font-mono font-bold uppercase rounded shadow-[4px_4px_8px_#babecc,-4px_-4px_8px_#ffffff] active:translate-y-1 active:shadow-none">
                    DAFTAR PPDB SEKARANG
                </a>
            </div>
        </div>
    </div>
</nav>

<script>
    // 1. Highlight Active Link
    document.addEventListener('DOMContentLoaded', () => {
        const currentPath = window.location.pathname.split('/').pop() || 'index.html';
        
        // Desktop Links
        document.querySelectorAll('.nav-link').forEach(link => {
            if(link.getAttribute('href') === currentPath) {
                link.classList.add('active'); // Memicu indikator LED
                link.classList.remove('text-[#4a5568]');
                link.classList.add('text-[#2d3436]');
                // Tambahkan efek shadow recessed/tenggelam untuk item aktif
                link.classList.add('shadow-[inset_2px_2px_4px_#babecc,inset_-2px_-2px_4px_#ffffff]');
            }
        });

        // Mobile Links
        document.querySelectorAll('.mobile-link').forEach(link => {
            if(link.getAttribute('href') === currentPath) {
                link.classList.add('text-[#ff4757]', 'bg-[#d1d9e6]', 'shadow-[inset_2px_2px_5px_#babecc,inset_-2px_-2px_5px_#ffffff]');
            }
        });
    });

    // 2. Toggle Mobile Menu
    function toggleMobileMenu() {
        const menu = document.getElementById('mobileMenu');
        const icon = document.querySelector('.lg\\:hidden button i');
        
        if (menu.classList.contains('hidden')) {
            menu.classList.remove('hidden');
            // Ganti icon ke X (close) jika perlu, tapi Lucide perlu re-init
            // Kita biarkan animasi slide saja
        } else {
            menu.classList.add('hidden');
        }
    }

    // 3. Navbar Scroll Effect (Optional Glass Strengthening)
    window.addEventListener('scroll', () => {
        const navbar = document.getElementById('mainNavbar');
        if (window.scrollY > 10) {
            navbar.classList.add('shadow-lg');
            navbar.classList.replace('bg-[#e0e5ec]/90', 'bg-[#e0e5ec]/95');
        } else {
            navbar.classList.remove('shadow-lg');
            navbar.classList.replace('bg-[#e0e5ec]/95', 'bg-[#e0e5ec]/90');
        }
    });
</script>

    <main class="pt-32 pb-24 px-4 md:px-12 max-w-7xl mx-auto space-y-12">

        <section class="flex flex-col lg:flex-row justify-between items-end gap-8 mb-8">
            <div>
                <h1 class="font-sans font-black text-4xl md:text-5xl text-ink uppercase text-emboss mb-4">
                    Dokumentasi <br><span class="text-transparent bg-clip-text bg-gradient-to-r from-ink to-ink-muted">Kegiatan</span>
                </h1>
                <p class="font-mono text-sm text-ink-muted max-w-xl border-l-4 border-safety-orange pl-4">
                    // ACCESSING MEDIA SERVER...<br>
                    Arsip visual kegiatan akademik, non-akademik, dan fasilitas sekolah.
                </p>
            </div>

            <div class="bg-chassis p-2 rounded-xl shadow-card border border-white/40 flex flex-wrap gap-2" id="filterContainer">
                <button onclick="setFilter('all')" class="filter-btn active px-6 py-2 rounded-lg font-mono text-xs font-bold uppercase transition-all bg-ink text-white shadow-pressed" id="btn-all">
                    SEMUA
                </button>
                <button onclick="setFilter('akademik')" class="filter-btn px-6 py-2 rounded-lg font-mono text-xs font-bold uppercase transition-all bg-chassis text-ink-muted hover:text-safety-orange hover:shadow-floating" id="btn-akademik">
                    AKADEMIK
                </button>
                <button onclick="setFilter('kegiatan')" class="filter-btn px-6 py-2 rounded-lg font-mono text-xs font-bold uppercase transition-all bg-chassis text-ink-muted hover:text-safety-orange hover:shadow-floating" id="btn-kegiatan">
                    KEGIATAN
                </button>
                <button onclick="setFilter('fasilitas')" class="filter-btn px-6 py-2 rounded-lg font-mono text-xs font-bold uppercase transition-all bg-chassis text-ink-muted hover:text-safety-orange hover:shadow-floating" id="btn-fasilitas">
                    FASILITAS
                </button>
            </div>
        </section>

        <section id="galleryGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 min-h-[500px]">
            </section>

        <div class="flex justify-center mt-12">
            <div class="flex gap-4 items-center bg-chassis p-2 rounded-xl shadow-recessed" id="paginationControls">
                </div>
        </div>

    </main>

    <div id="lightbox" class="fixed inset-0 z-50 bg-black/90 backdrop-blur-md hidden flex items-center justify-center p-4">
        <div class="relative w-full max-w-5xl bg-black border-2 border-[#333] rounded-xl shadow-monitor overflow-hidden flex flex-col">
            <div class="h-12 border-b border-[#333] bg-[#0d0f12] flex items-center justify-between px-4">
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-safety-green animate-pulse"></span>
                    <span class="font-mono text-xs text-safety-green">VIEWING_MODE: FULL_RES</span>
                </div>
                <button onclick="closeLightbox()" class="text-white hover:text-safety-orange transition-colors">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <div class="relative flex-1 bg-black flex items-center justify-center p-8 min-h-[50vh]">
                <img id="lightboxImg" src="" class="max-w-full max-h-[70vh] object-contain shadow-2xl border border-white/10" alt="Detail Gambar Galeri">
                <div class="absolute inset-0 bg-scanlines opacity-10 pointer-events-none"></div>
                <div class="absolute top-4 left-4 w-4 h-4 border-t-2 border-l-2 border-white/20"></div>
                <div class="absolute top-4 right-4 w-4 h-4 border-t-2 border-r-2 border-white/20"></div>
                <div class="absolute bottom-4 left-4 w-4 h-4 border-b-2 border-l-2 border-white/20"></div>
                <div class="absolute bottom-4 right-4 w-4 h-4 border-b-2 border-r-2 border-white/20"></div>
            </div>
            <div class="h-16 border-t border-[#333] bg-[#0d0f12] px-6 py-3 flex justify-between items-center">
                <div>
                    <h3 id="lightboxTitle" class="font-sans font-bold text-white text-lg">Image Title</h3>
                    <p class="font-mono text-[10px] text-gray-500">METADATA: ISO 400 | f/2.8</p>
                </div>
                <button class="px-4 py-2 bg-[#222] border border-[#444] rounded text-white font-mono text-xs hover:bg-[#333]">
                    DOWNLOAD_FILE
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- 1. DATA DATABASE (12 Items for Demo) ---
        const galleryData = [
            { id: 1, category: 'kegiatan', title: 'Pensi Sekolah 2025', size: '4.2MB', img: 'https://images.unsplash.com/photo-1511632765486-a01980e01a18?q=80&w=600&auto=format&fit=crop' },
            { id: 2, category: 'akademik', title: 'Ujian Praktikum Kimia', size: '12MB', img: 'https://images.unsplash.com/photo-1544717305-2782549b5136?q=80&w=600&auto=format&fit=crop' },
            { id: 3, category: 'fasilitas', title: 'Perpustakaan Digital', size: '1.8MB', img: 'https://images.unsplash.com/photo-1562774053-701939374585?q=80&w=600&auto=format&fit=crop' },
            { id: 4, category: 'kegiatan', title: 'Kemah Bakti Pramuka', size: '5.5MB', img: 'https://images.unsplash.com/photo-1526976668912-1a811878dd37?q=80&w=600&auto=format&fit=crop' },
            { id: 5, category: 'akademik', title: 'Kunjungan Industri', size: '3.1MB', img: 'https://images.unsplash.com/photo-1531403009284-440f080d1e12?q=80&w=600&auto=format&fit=crop' },
            { id: 6, category: 'fasilitas', title: 'Lab Komputer Baru', size: '2.4MB', img: 'https://images.unsplash.com/photo-1598981493990-33a97bc94219?q=80&w=600&auto=format&fit=crop' },
            { id: 7, category: 'kegiatan', title: 'Pertandingan Basket Final', size: '6.0MB', img: 'https://images.unsplash.com/photo-1546519638-68e109498ffc?q=80&w=600&auto=format&fit=crop' },
            { id: 8, category: 'akademik', title: 'Wisuda Angkatan 25', size: '8.2MB', img: 'https://images.unsplash.com/photo-1523050854058-8df90110c9f1?q=80&w=600&auto=format&fit=crop' },
            { id: 9, category: 'fasilitas', title: 'Masjid Sekolah', size: '3.3MB', img: 'https://images.unsplash.com/photo-1605656816944-971cd5c1407f?q=80&w=600&auto=format&fit=crop' },
            { id: 10, category: 'kegiatan', title: 'Lomba Paduan Suara', size: '4.5MB', img: 'https://images.unsplash.com/photo-1516280440614-6697288d5d38?q=80&w=600&auto=format&fit=crop' },
            { id: 11, category: 'akademik', title: 'Workshop Robotik', size: '2.9MB', img: 'https://images.unsplash.com/photo-1581092921461-eab62e97a782?q=80&w=600&auto=format&fit=crop' },
            { id: 12, category: 'fasilitas', title: 'Kantin Sehat', size: '1.5MB', img: 'https://images.unsplash.com/photo-1604579450682-438c8588a681?q=80&w=600&auto=format&fit=crop' },
        ];

        // --- 2. STATE ---
        let state = {
            page: 1,
            perPage: 6,
            filter: 'all'
        };

        // --- 3. RENDER FUNCTIONS ---
        const galleryGrid = document.getElementById('galleryGrid');
        const paginationControls = document.getElementById('paginationControls');

        function renderGallery() {
            // Filter Data
            const filteredData = state.filter === 'all' 
                ? galleryData 
                : galleryData.filter(item => item.category === state.filter);

            // Pagination Logic
            const totalPages = Math.ceil(filteredData.length / state.perPage);
            const start = (state.page - 1) * state.perPage;
            const end = start + state.perPage;
            const paginatedData = filteredData.slice(start, end);

            // Render Items
            galleryGrid.innerHTML = "";
            
            if(paginatedData.length === 0) {
                galleryGrid.innerHTML = `<div class="col-span-3 text-center py-12 text-ink-muted font-mono">NO_DATA_FOUND_IN_ARCHIVE</div>`;
            }

            paginatedData.forEach(item => {
                // PageSpeed: loading="lazy" & width/height attributes
                const html = `
                <div class="gallery-item group relative bg-chassis p-1 rounded-2xl shadow-card cursor-pointer hover:-translate-y-2 fade-in" 
                     onclick="openLightbox(this)">
                    <div class="bg-black h-64 rounded-xl overflow-hidden border-2 border-[#333] relative">
                        <img src="${item.img}" 
                             alt="${item.title}" 
                             width="600" height="400" 
                             loading="lazy" 
                             class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700 opacity-80 group-hover:opacity-100">
                        <div class="absolute inset-0 bg-scanlines opacity-20 pointer-events-none"></div>
                        <div class="absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black to-transparent opacity-0 group-hover:opacity-100 transition-opacity">
                            <h3 class="font-bold text-white text-sm font-sans">${item.title}</h3>
                            <p class="font-mono text-[10px] text-safety-green">FILE_${item.id}.RAW | ${item.size}</p>
                        </div>
                         <div class="absolute top-2 left-2 w-2 h-2 border-t-2 border-l-2 border-white/30"></div>
                        <div class="absolute top-2 right-2 w-2 h-2 border-t-2 border-r-2 border-white/30"></div>
                        <div class="absolute bottom-2 left-2 w-2 h-2 border-b-2 border-l-2 border-white/30"></div>
                        <div class="absolute bottom-2 right-2 w-2 h-2 border-b-2 border-r-2 border-white/30"></div>
                    </div>
                    <div class="mt-3 flex justify-between items-center px-2">
                        <span class="font-mono text-[10px] font-bold text-ink-muted uppercase">FOLDER: ${item.category}</span>
                        <i data-lucide="maximize-2" class="w-4 h-4 text-ink-muted group-hover:text-safety-orange transition-colors"></i>
                    </div>
                </div>`;
                galleryGrid.innerHTML += html;
            });

            renderPagination(totalPages);
            lucide.createIcons();
        }

        function renderPagination(totalPages) {
            if (totalPages <= 1) {
                paginationControls.innerHTML = '';
                paginationControls.parentElement.style.display = 'none'; // Hide if only 1 page
                return;
            }
            paginationControls.parentElement.style.display = 'flex';

            let html = `
                <button onclick="changePage(-1)" ${state.page === 1 ? 'disabled' : ''} class="w-10 h-10 rounded bg-chassis shadow-card flex items-center justify-center text-ink hover:text-safety-orange transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                    <i data-lucide="chevron-left" class="w-5 h-5"></i>
                </button>
                <span class="font-mono text-xs text-ink-muted font-bold mx-4">PAGE ${state.page} / ${totalPages}</span>
                <button onclick="changePage(1)" ${state.page === totalPages ? 'disabled' : ''} class="w-10 h-10 rounded bg-chassis shadow-card flex items-center justify-center text-ink hover:text-safety-orange transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                    <i data-lucide="chevron-right" class="w-5 h-5"></i>
                </button>
            `;
            paginationControls.innerHTML = html;
            lucide.createIcons();
        }

        // --- 4. CONTROLLERS ---
        function setFilter(cat) {
            state.filter = cat;
            state.page = 1; // Reset to page 1 on filter change
            
            // Update Buttons Visuals
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-ink', 'text-white', 'shadow-pressed');
                btn.classList.add('bg-chassis', 'text-ink-muted');
            });
            const activeBtn = document.getElementById(`btn-${cat}`);
            if(activeBtn) {
                activeBtn.classList.remove('bg-chassis', 'text-ink-muted');
                activeBtn.classList.add('bg-ink', 'text-white', 'shadow-pressed');
            }

            renderGallery();
        }

        function changePage(direction) {
            const filteredData = state.filter === 'all' 
                ? galleryData 
                : galleryData.filter(item => item.category === state.filter);
            const totalPages = Math.ceil(filteredData.length / state.perPage);
            
            const newPage = state.page + direction;
            if(newPage > 0 && newPage <= totalPages) {
                state.page = newPage;
                renderGallery();
                // Scroll to top of grid
                document.getElementById('galleryGrid').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // --- 5. LIGHTBOX LOGIC ---
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxTitle = document.getElementById('lightboxTitle');

        function openLightbox(element) {
            const imgParams = element.querySelector('img');
            const titleParams = element.querySelector('h3').innerText;
            
            lightboxImg.src = imgParams.src;
            lightboxImg.alt = imgParams.alt; // A11y
            lightboxTitle.innerText = titleParams;
            lightbox.classList.remove('hidden');
        }

        function closeLightbox() {
            lightbox.classList.add('hidden');
        }
        
        // Escape key close
        document.addEventListener('keydown', (e) => {
            if (e.key === "Escape") closeLightbox();
        });

        // Initialize
        renderGallery();

    </script>
</body>
</html>